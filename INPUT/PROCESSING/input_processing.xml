<?xml version='1.0' encoding='UTF-8'?>

<processing_parameters>

    <!--print screen output-->
    <verbose>1</verbose>
    <!--plot time series and psd at various processing stages-->
    <check>1</check>

    <!--*************************************************************************************************-->
    <!--input and output directories-->
    <!--*************************************************************************************************-->

    <directories>
        <!--output directory for processed data-->
        <outdir>./../../sandbox/Test_Processing/test</outdir>
        <indirs>./DATA/GEOSCOPE/G.2012.01.data</indirs>
    </directories>

    <!--*************************************************************************************************-->
    <!--quality checks-->
    <!--*************************************************************************************************-->
   
    <quality>
        <min_length_in_sec>50000</min_length_in_sec>
    </quality>

    <!--*************************************************************************************************-->
    <!--preprocessing-->
    <!--*************************************************************************************************-->
    
    <!--Workflow of processing:-->
    <!--Provide string: 'split' means traces will be split first, then downsampled.-->
    <!--'decimate' means traces will be downsampled first. This comes with additional lowpass (antialias) filter at a quarter of the new sampling rate-->
    <first_step>decimate</first_step>
    
    <!--preprocessing on individual seismograms-->
    <!--The order corresponds to the actual order of execution-->
    <processing>
        <!--split traces into shorter segments-->
        <split>
            <doit>1</doit>
            <length_in_sec>1048576</length_in_sec>
        </split>
        <!--trim to nearest second-->
        <trim>1</trim>
        <!--remove linear trend-->
        <detrend>1</detrend>
        <!--remove mean-->
        <demean>1</demean>
        <!--taper edges of seismogram for better filtering-->
        <taper>
            <doit>1</doit>
            <taper_width>0.05</taper_width>
        </taper>
        
        
        <!--bandpass filter before response removal-->
        <bandpass_1>
            <doit>1</doit>
            <f_min>0.0005</f_min>
            <f_max>0.25</f_max>
            <corners>3</corners>
        </bandpass_1>
        
        
        <!--downsampling-->
        <!--A lowpass filter is hardcoded into downsampling. It has a corner frequency of one quarter of the new sampling frequency.-->
        <!--When a large amont of downsampling is performed, do it in two steps! e. g. instead of by factor 20 decimate by 5 then 4.-->
        <!--put in intermediate steps separated by spaces, e. g. 4.0 1.0-->
        <decimation>
            <doit>1</doit>
            <new_sampling_rate>4.0 1.0</new_sampling_rate>
        </decimation>
        
        <!--remove instrument response-->
        <instrument_response>
            <doit>1</doit>
            <unit>DIS</unit>
            <respdir>./DATA/GEOSCOPE/G.2012.resp</respdir>
            <waterlevel>500.0</waterlevel>
        </instrument_response>
        
        <!--bandpass after response removal-->
        <bandpass_2>
            <doit>1</doit>
            <f_min>0.0005</f_min>
            <f_max>0.2</f_max>
            <corners>3</corners>
        </bandpass_2>
    </processing>


    <!--*************************************************************************************************-->
    <!--normalisation-->
    <!--*************************************************************************************************-->

    <!--time- and frequency-domain normalisations-->
    <normalisation>
        <!--onebit normalization-->
        <onebit>0</onebit>
        <!--clip at rms of the trace-->
        <rms_clipping>0</rms_clipping>
        <!--running average normalisation-->
        <ram_normal>
            <doit>0</doit>
            <!--window length in seconds-->
            <window_length>10.0</window_length>
        </ram_normal>
        <!--iterative clipping at rms multiple-->
        <waterlevel>
            <doit>0</doit>
            <!--multiple of the rms above which to clip-->
            <level>2.0</level>
        </waterlevel>
        <!--spectral whitening-->
        <whitening>
            <doit>0</doit>
            <!--ObsPy: number of past/future values to calculate moving average. Set to 1 for no smoothing.-->
            <smoothing>5</smoothing>
        </whitening>
    </normalisation>


    <!--*************************************************************************************************-->
    <!--storage-->
    <!--*************************************************************************************************-->

    <!--rename files to network.station.location.channel_starttime_endtime_samplingrate_format-->
    <rename>1</rename>
    <!--save preprocessed data-->
    <saveprep>1</saveprep>
    <!--Save plots as png (only processed trace is saved...)-->
    <saveplot>1</saveplot>
    
    
    
</processing_parameters>
